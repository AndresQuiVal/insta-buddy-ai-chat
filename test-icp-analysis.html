<!DOCTYPE html>
<html>
<head>
    <title>Test ICP Analysis</title>
</head>
<body>
    <h1>Analizando ICP...</h1>
    <div id="result"></div>

    <script>
        const icpText = `
üéØ ¬øQUI√âN es tu cliente ideal?
Son principalmente mujeres j√≥venes y adultas (20‚Äì40 a√±os) interesadas en verse y sentirse mejor.
Trabajan en sectores donde la imagen personal es importante (ej. est√©tica, moda, redes sociales, ventas) o son beauty lovers que invierten en s√≠ mismas.
Se identifican como: skincare lover, facialista profesional, est√©tica avanzada, est√©tica integral, est√©tica y bienestar.
Sus problemas comunes: acn√©, piel opaca, arrugas prematuras, falta de constancia en la rutina facial.

‚∏ª

üåç ¬øD√ìNDE consume contenido tu cliente ideal?
En Instagram y TikTok, siguiendo cuentas de skincare, est√©tica facial, beauty influencers y marcas de belleza.
Usa hashtags como: #skincareroutine, #glowskin, #rutinafacial, #cuidadofacial, #cosm√©ticanatural.
Tambi√©n busca tips en YouTube sobre rutinas, rese√±as de productos o "before & after".
Se conecta con comunidades de belleza: foros, grupos de Facebook de "esteticistas" o "skincare lovers".

‚∏ª

‚ú® ¬øQU√â los atrae y capta su atenci√≥n?
Contenido visual tipo "before & after" que muestre transformaci√≥n real.
Historias de superaci√≥n personal a trav√©s del cuidado de la piel ("me ve√≠a cansada, ahora tengo glow").
Ofertas irresistibles: paquetes de faciales, beauty drinks, promociones de productos con regalo, descuentos en cosm√©tica natural.
Hacks r√°pidos: rutinas f√°ciles, secretos para lograr piel luminosa en minutos, tendencias en antiaging.

‚∏ª

üéØ ¬øQU√â resultado buscan obtener?
Una piel saludable, luminosa y uniforme.
Reducir arrugas, manchas y signos de envejecimiento con soluciones accesibles.
Recuperar autoestima y confianza al mejorar su apariencia.
Tener una rutina clara y productos que den resultados visibles en poco tiempo, sin necesidad de procedimientos invasivos.
        `;

        async function analyzeICP() {
            try {
                const response = await fetch('https://rpogkbqcuqrihynbpnsi.supabase.co/functions/v1/analyze-icp', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJwb2drYnFjdXFyaWh5bmJwbnNpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgyMDczNzAsImV4cCI6MjA2Mzc4MzM3MH0.9x4X9Dqc_eIkgaG4LAecrG9PIGXZEEqxYIMbLBtXjNQ'
                    },
                    body: JSON.stringify({
                        prompt: icpText
                    })
                });

                const data = await response.json();
                console.log('Response:', data);
                
                if (data.response) {
                    const result = typeof data.response === 'string' ? JSON.parse(data.response) : data.response;
                    document.getElementById('result').innerHTML = `
                        <h2>Resultado del An√°lisis ICP:</h2>
                        <p><strong>Score:</strong> ${result.score}/4</p>
                        <p><strong>Bloques completos:</strong> ${result.completedBlocks?.join(', ') || 'Ninguno'}</p>
                        
                        <h3>üîç Keywords para B√∫squeda General:</h3>
                        <p>${result.searchKeywords?.join(', ') || 'No generadas'}</p>
                        
                        <h3>üí¨ Keywords para Posts con Comentarios:</h3>
                        <p>${result.commentKeywords?.join(', ') || 'No generadas'}</p>
                        
                        <h3>üë§ Keywords para Cuentas:</h3>
                        <p>${result.accountKeywords?.join(', ') || 'No generadas'}</p>
                    `;
                } else {
                    document.getElementById('result').innerHTML = `<p>Error: ${data.error || 'No se pudo obtener respuesta'}</p>`;
                }
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('result').innerHTML = `<p>Error: ${error.message}</p>`;
            }
        }

        analyzeICP();
    </script>
</body>
</html>